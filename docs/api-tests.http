### Mariáš Game Engine API Tests
### Run these requests from IntelliJ IDEA

### ===========================================
### Health Check
### ===========================================

GET http://localhost:8080/health

### ===========================================
### Game Management
### ===========================================

### Create a new game (creator joins automatically)
POST http://localhost:8080/games
Content-Type: application/json

{"playerId": "p1", "playerName": "Alice"}

> {% client.global.set("gameId", response.body.gameId); %}

### List all games
GET http://localhost:8080/games

### Get game state
GET http://localhost:8080/games/{{gameId}}

### Delete a game
DELETE http://localhost:8080/games/{{gameId}}

### ===========================================
### Join Game
### ===========================================

### Player 2 joins
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "join", "playerId": "p2", "playerName": "Bob"}}

### Player 3 joins
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "join", "playerId": "p3", "playerName": "Charlie"}}

### ===========================================
### Start and Deal
### ===========================================

### Start game
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "start", "playerId": "p1"}}

### Deal cards (two-phase mode - default)
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "deal", "playerId": "p1"}}

### Deal cards (non-two-phase mode)
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "deal", "playerId": "p1", "twoPhase": false}}

### ===========================================
### Two-Phase Dealing (chooser actions)
### ===========================================

### Choose trump during dealing pause (chooser only)
### Makes chooser the declarer, skips bidding
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "choosetrump", "playerId": "p2", "trump": "HEARTS"}}

### Chooser pass during dealing pause (chooser only)
### Proceeds to normal bidding
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "chooserpass", "playerId": "p2"}}

### ===========================================
### Player Hands
### ===========================================

### Get player 1's hand
GET http://localhost:8080/games/{{gameId}}/players/p1/hand

### Get player 2's hand
GET http://localhost:8080/games/{{gameId}}/players/p2/hand

### Get player 3's hand
GET http://localhost:8080/games/{{gameId}}/players/p3/hand

### Get bidding state
GET http://localhost:8080/games/{{gameId}}/bidding

### ===========================================
### Bidding
### ===========================================

### Place bid (HRA)
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "bid", "playerId": "p2", "gameType": "HRA"}}

### Pass
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "pass", "playerId": "p3"}}

### Pass (bidding ends)
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "pass", "playerId": "p1"}}

### ===========================================
### Talon Exchange
### ===========================================

### Get talon (declarer only)
GET http://localhost:8080/games/{{gameId}}/talon?playerId=p2

### Exchange talon
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "exchange", "playerId": "p2", "cardsToDiscard": [
  {"suit": "SPADES", "rank": "SEVEN"},
  {"suit": "SPADES", "rank": "EIGHT"}
]}}

### ===========================================
### Trump Selection
### ===========================================

### Select trump
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "trump", "playerId": "p2", "trump": "HEARTS"}}

### ===========================================
### Playing Cards
### ===========================================

### Play a card
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "play", "playerId": "p2", "card": {"suit": "HEARTS", "rank": "ACE"}}}

### Play next card
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "play", "playerId": "p3", "card": {"suit": "HEARTS", "rank": "TEN"}}}

### Play next card
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "play", "playerId": "p1", "card": {"suit": "HEARTS", "rank": "KING"}}}

### ===========================================
### New Round
### ===========================================

### Start new round
POST http://localhost:8080/games/{{gameId}}/actions
Content-Type: application/json

{"action": {"type": "newround", "playerId": "p1"}}

### ===========================================
### Reference
### ===========================================
# Action types: join, leave, start, deal, choosetrump, chooserpass, bid, pass, exchange, trump, play, marriage, newround
# Game types: HRA, SEDMA, KILO, BETL, DURCH
# Suits: SPADES, CLUBS, DIAMONDS, HEARTS
# Ranks: SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING, ACE
# Points: 7,8,9=0  J=2  Q=3  K=4  10=10  A=11
# Two-phase dealing: deal with twoPhase=true (default) pauses after chooser gets 7 cards
